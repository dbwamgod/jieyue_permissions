webpackJsonp([9],{275:function(n,e,t){"use strict";function a(n){l||(t(891),t(893))}Object.defineProperty(e,"__esModule",{value:!0});var s=t(477),o=t.n(s);for(var r in s)"default"!==r&&function(n){t.d(e,n,function(){return s[n]})}(r);var i=t(895),u=t.n(i),l=!1,c=t(0),d=a,f=c(o.a,u.a,!1,d,"data-v-3c5c1d30",null);f.options.__file="src\\views\\form\\article-publish\\article-publish.vue",e.default=f.exports},286:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t(3),s=function(n){return n&&n.__esModule?n:{default:n}}(a),o="http://172.18.101.118:10000/galaxy-platform-management",r="http://172.18.101.118:10000";e.default={_baseUrlQ:o,userId:function(){return r+"/platform-user-oauth2/user?access_token="+s.default.get("tokenY")},Resource_permissions:function(){return r+"/platform-user-admin/resource/find/auth/"+s.default.get("party_userId")+"?access_token="+s.default.get("tokenY")},login:function(){return r+"/platform-user-oauth2/oauth/token"},com_Data:function(){return o+"/galaxy/meta/getMeta?access_token="+s.default.get("tokenY")},modifyMeta:function(){return o+"/galaxy/meta/modifyMeta?access_token="+s.default.get("tokenY")},queryUserBehaviorPage:function(){return o+"/galaxy/userBehavior/queryUserBehaviorPage?access_token="+s.default.get("tokenY")},queryAllDbs:function(){return o+"/galaxy/privilege/queryAllDbs?access_token="+s.default.get("tokenY")},queryAllUsers:function(){return r+"/platform-user-admin/user/listUserByTenant?access_token="+s.default.get("tokenY")},queryDbPrivilege:function(){return o+"/galaxy/privilege/queryDbPrivilege?access_token="+s.default.get("tokenY")},queryTbPrivilegePage:function(){return o+"/galaxy/privilege/queryTbPrivilegePage?access_token="+s.default.get("tokenY")},changeUsePrivilege:function(){return o+"/galaxy/privilege/changeUsePrivilege?access_token="+s.default.get("tokenY")},getHueAutoLoginUrl:function(){return o+"/galaxy/hadoop/getAutoLoginUrl?access_token="+s.default.get("tokenY")},getMonitorList:function(){return o+"/galaxy/work/getMonitorList?access_token="+s.default.get("tokenY")},getMonitorLog:function(n){return o+"/galaxy/work/getMonitorLog/"+n+"?access_token="+s.default.get("tokenY")},killJob:function(n){return o+"/galaxy/user/killJob/"+n+"?access_token="+s.default.get("tokenY")},getSearch:function(n){return"http://10.50.192.58:8080/search?id="+n+"&access_token="+s.default.get("tokenY")},getWarnList:function(){return o+"/galaxy/work/getWarnList?access_token="+s.default.get("tokenY")},getHostInformations:function(){return o+"/galaxy/cluster/getHostInformations?access_token="+s.default.get("tokenY")},getHostHisInformations:function(n){return o+"/galaxy/cluster/getHostHisInformations/"+n+"?access_token="+s.default.get("tokenY")}}},477:function(n,e,t){"use strict";function a(n){return n&&n.__esModule?n:{default:n}}Object.defineProperty(e,"__esModule",{value:!0});var s=t(31),o=a(s),r=t(286),i=a(r),u=t(3),l=a(u);e.default={data:function(){var n=this;return{ajaxHistoryData:[],dataCount:0,page:{pageIndex:1,pageSize:10},SpinType:!1,historyColumns:[{title:"表名",key:"tableName"},{title:"其他",key:"organiseName"},{title:"查询",key:"selectStatus",render:function(e,t,a){var s=1==t.row.selectStatus;return e("Checkbox",{props:{type:"Checkbox",size:"small",rowIndex:t.index,disabled:t.row.allStatusDisableds,value:s},on:{"on-change":function(e,a){n.historyData[t.index].selectStatus=1==t.row.selectStatus?0:1,t.row.selectStatus=1==t.row.selectStatus?0:1}}})}},{title:"添加",key:"insertStatus",render:function(e,t,a){var s=1==t.row.insertStatus;return e("Checkbox",{props:{type:"Checkbox",size:"small",rowIndex:t.index,disabled:t.row.allStatusDisableds,value:s},on:{"on-change":function(e,a){n.historyData[t.index].insertStatus=1==t.row.insertStatus?0:1,t.row.insertStatus=1==t.row.insertStatus?0:1}}})}},{title:"修改",key:"updateStatus",render:function(e,t,a){var s=1==t.row.updateStatus;return e("Checkbox",{props:{type:"Checkbox",size:"small",rowIndex:t.index,disabled:t.row.allStatusDisableds,value:s},on:{"on-change":function(e,a){n.historyData[t.index].updateStatus=1==t.row.updateStatus?0:1,t.row.updateStatus=1==t.row.updateStatus?0:1}}})}},{title:"删除",key:"deletetStatus",render:function(e,t,a){var s=1==t.row.deletetStatus;return e("Checkbox",{props:{type:"Checkbox",size:"small",rowIndex:t.index,disabled:t.row.allStatusDisableds,value:s},on:{"on-change":function(e,a){n.historyData[t.index].deletetStatus=1==t.row.deletetStatus?0:1,t.row.deletetStatus=1==t.row.deletetStatus?0:1}}})}}],historyData:[],historyOldData:[],resModal:!1,resModalList:[],cityList:[{}],userList:[],formItem:{input:"",select:"stg",radio:"male",checkbox:[],switch:!0,date:"",time:"",slider:[20,50],textarea:"",dbName:"",tableName:""},queryDbPrivilegeList:[{name:"全库查询",key:"selectStatus",flag:0},{name:"全库添加",key:"insertStatus",flag:0},{name:"全库修改",key:"updateStatus",flag:0},{name:"全库删除",key:"deletetStatus",flag:0}],queryDbPrivilegeOldList:{}}},created:function(){this.init()},methods:{init:function(){var n=this;this.$axios({method:"post",url:i.default.queryAllUsers(),data:{pageInfo:{currentPage:0,pageSize:0,totalPages:0,totalRecords:0},tenantId:1},headers:{Authorization:l.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){if(200==e.data.code&&e.data.data){var t=[];e.data.data.forEach(function(n){t.push(n.email.split("@")[0])}),n.userList=t,t.length>0&&(n.formItem.userName=t[0])}}),this.$axios({method:"get",url:i.default.queryAllDbs(),headers:{Authorization:l.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code&&(n.cityList=e.data.data,n.formItem.dbName=e.data.data[0].dbName,n.initList())})},search:function(){this.page.pageIndex=1,this.initList()},onHandChange:function(n){var e=this;this.SpinType=!0;var t=[];this.queryDbPrivilegeList.map(function(e){n.indexOf(e.key)>-1?e.flag=1:e.flag=0}),this.queryDbPrivilegeList.map(function(n){n.flag!=e.queryDbPrivilegeOldList[n.key]&&t.push({dbName:e.formItem.dbName,flag:n.flag,operate:e.conversion(n.key),tableName:"",userName:e.formItem.userName})}),this.$axios({method:"post",url:i.default.changeUsePrivilege(),data:t,headers:{}}).then(function(n){200==n.data.code?(e.resModalList=n.data.data,e.resModal=!0,e.SpinType=!1,e.initList()):(e.SpinType=!1,e.$Message.error("网络请求错误！请刷新",3))})},changepage:function(n){this.page.pageIndex=n,this.initList()},submit:function(){var n=this;this.SpinType=!0;var e=this.formItem.userName,t=["deletetStatus","insertStatus","selectStatus","updateStatus"],a=[];this.historyData.map(function(s,o){var r=[];for(var i in s)n.historyOldData[o][i]!=s[i]&&t.indexOf(i)>-1&&r.push({dbName:s.dbName,flag:1==s[i]?"1":"0",operate:n.conversion(i),tableName:s.tableName,userName:e});a.push.apply(a,r)}),this.$axios({method:"post",url:i.default.changeUsePrivilege(),data:a,headers:{Authorization:l.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code?(n.resModalList=e.data.data,n.resModal=!0,n.SpinType=!1):(n.SpinType=!1,n.$Message.info(e.data.msg)),n.initList()},function(e){n.SpinType=!1,n.$Message.info("网络请求错误"),n.initList()}),setTimeout(function(){n.SpinType&&n.$Message.info("稍等")},5e3)},initList:function(){var n=this;this.SpinType=!0,this.$axios({method:"post",url:i.default.queryTbPrivilegePage(),data:{form:{userName:this.formItem.userName,dbName:this.formItem.dbName,tableName:this.formItem.tableName.replace(/\s+/g,"")},pageIndex:this.page.pageIndex,pageSize:this.page.pageSize},headers:{Authorization:l.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code?(n.historyData=e.data.data,n.dataCount=e.data.page.totalRecords,n.historyOldData=JSON.parse((0,o.default)(e.data.data)),n.SpinType=!1):(n.SpinType=!1,n.$Message.info(e.data.msg))}),this.$axios({method:"post",url:i.default.queryDbPrivilege(),data:{userName:this.formItem.userName,dbName:this.formItem.dbName},headers:{Authorization:l.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code&&(n.formItem.checkbox=[],n.queryDbPrivilegeOldList=e.data.data,1==e.data.data.deletetStatus&&(n.formItem.checkbox.push("deletetStatus"),n.queryDbPrivilegeList[2].flag=1),1==e.data.data.insertStatus&&(n.formItem.checkbox.push("insertStatus"),n.queryDbPrivilegeList[0].flag=1),1==e.data.data.selectStatus&&(n.formItem.checkbox.push("selectStatus"),n.queryDbPrivilegeList[3].flag=1),1==e.data.data.updateStatus&&(n.formItem.checkbox.push("updateStatus"),n.queryDbPrivilegeList[1].flag=1))})},dbNameSelectChange:function(){this.formItem.tableName="",this.initList()},modelOk:function(){this.resModal=!1,this.resModalList=[]},conversion:function(n){switch(n){case"deletetStatus":return"delete";case"insertStatus":return"insert";case"selectStatus":return"select";case"updateStatus":return"update"}}}}},891:function(n,e,t){var a=t(892);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(9)("d6ee5ba4",a,!1)},892:function(n,e,t){e=n.exports=t(8)(!1),e.push([n.i,"\n.paging[data-v-3c5c1d30] {\n    float: right;\n    margin-top: 10px;\n}\n",""])},893:function(n,e,t){var a=t(894);"string"==typeof a&&(a=[[n.i,a,""]]),a.locals&&(n.exports=a.locals);t(9)("7d509660",a,!1)},894:function(n,e,t){e=n.exports=t(8)(!1),e.push([n.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},895:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[t("Spin",{directives:[{name:"show",rawName:"v-show",value:n.SpinType,expression:"SpinType"}],attrs:{fix:""}},[t("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),n._v(" "),t("div",[n._v("Loading")])],1),n._v(" "),t("Row",{staticClass:"code-row-bg",staticStyle:{margin:"10px 0"},attrs:{type:"flex",justify:"start",gutter:5}},[t("Col",{attrs:{span:"8"}},[t("Input",{attrs:{placeholder:"请输入表名"},model:{value:n.formItem.tableName,callback:function(e){n.$set(n.formItem,"tableName",e)},expression:"formItem.tableName"}})],1),n._v(" "),t("Col",{attrs:{span:"4"}},[t("Button",{attrs:{type:"primary"},on:{click:n.search}},[n._v("搜索")])],1)],1),n._v(" "),t("Form",{attrs:{model:n.formItem,"label-width":60}},[t("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[t("Col",{attrs:{span:"5"}},[t("Form-item",{attrs:{label:"用户名："}},[t("Select",{attrs:{placeholder:"请选择"},on:{"on-change":n.dbNameSelectChange},model:{value:n.formItem.userName,callback:function(e){n.$set(n.formItem,"userName",e)},expression:"formItem.userName"}},n._l(n.userList,function(e){return t("Option",{key:e,attrs:{value:e||""}},[n._v(n._s(e))])}))],1)],1),n._v(" "),t("Col",{attrs:{span:"5"}},[t("Form-item",{attrs:{label:"库名："}},[t("Select",{attrs:{placeholder:"请选择"},on:{"on-change":n.dbNameSelectChange},model:{value:n.formItem.dbName,callback:function(e){n.$set(n.formItem,"dbName",e)},expression:"formItem.dbName"}},n._l(n.cityList,function(e){return t("Option",{key:e.dbName,attrs:{value:e.dbName||""}},[n._v(n._s(e.dbName)+"\n                    ")])}))],1)],1),n._v(" "),t("Col",{attrs:{span:"8"}},[t("Form-item",{attrs:{label:""}},[t("Checkbox-group",{on:{"on-change":n.onHandChange},model:{value:n.formItem.checkbox,callback:function(e){n.$set(n.formItem,"checkbox",e)},expression:"formItem.checkbox"}},n._l(n.queryDbPrivilegeList,function(e){return t("Checkbox",{attrs:{label:e.key}},[n._v(n._s(e.name))])}))],1)],1),n._v(" "),t("Col",{attrs:{span:"4"}},[t("Button",{attrs:{type:"primary"},on:{click:n.submit}},[n._v("提交")])],1)],1)],1),n._v(" "),t("Table",{attrs:{columns:n.historyColumns,data:n.historyData}}),n._v(" "),t("Page",{staticClass:"paging",attrs:{total:n.dataCount,"page-size":n.page.pageSize,current:n.page.pageIndex,"show-total":""},on:{"on-change":n.changepage}}),n._v(" "),t("Modal",{attrs:{title:"返回结果"},on:{"on-ok":n.modelOk,"on-cancel":n.modelOk},model:{value:n.resModal,callback:function(e){n.resModal=e},expression:"resModal"}},n._l(n.resModalList,function(e){return t("p",[n._v("库名："+n._s(e.dbName)+","),t("br"),n._v("\n            表名："+n._s(e.tableName)+","),t("br"),n._v("\n            权限："+n._s(e.operate)+","),t("br"),n._v("\n            权限修改结果："+n._s(1==e.secrityStatus?"成功":"失败")+" ")])}))],1)},s=[];a._withStripped=!0;var o={render:a,staticRenderFns:s};e.default=o}});