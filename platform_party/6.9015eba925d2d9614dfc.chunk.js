webpackJsonp([6],{267:function(t,e,a){"use strict";function o(t){u||(a(855),a(857))}Object.defineProperty(e,"__esModule",{value:!0});var n=a(469),r=a.n(n);for(var i in n)"default"!==i&&function(t){a.d(e,t,function(){return n[t]})}(i);var s=a(859),l=a.n(s),u=!1,d=a(0),c=o,m=d(r.a,l.a,!1,c,"data-v-272316b1",null);m.options.__file="src\\views\\my-components\\markdown-editor\\markdown-editor.vue",e.default=m.exports},286:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a(3),n=function(t){return t&&t.__esModule?t:{default:t}}(o),r="http://172.18.101.118:10000/galaxy-platform-management",i="http://172.18.101.118:10000";e.default={_baseUrlQ:r,userId:function(){return i+"/platform-user-oauth2/user?access_token="+n.default.get("tokenY")},Resource_permissions:function(){return i+"/platform-user-admin/resource/find/auth/"+n.default.get("party_userId")+"?access_token="+n.default.get("tokenY")},login:function(){return i+"/platform-user-oauth2/oauth/token"},com_Data:function(){return r+"/galaxy/meta/getMeta?access_token="+n.default.get("tokenY")},modifyMeta:function(){return r+"/galaxy/meta/modifyMeta?access_token="+n.default.get("tokenY")},queryUserBehaviorPage:function(){return r+"/galaxy/userBehavior/queryUserBehaviorPage?access_token="+n.default.get("tokenY")},queryAllDbs:function(){return r+"/galaxy/privilege/queryAllDbs?access_token="+n.default.get("tokenY")},queryAllUsers:function(){return i+"/platform-user-admin/user/listUserByTenant?access_token="+n.default.get("tokenY")},queryDbPrivilege:function(){return r+"/galaxy/privilege/queryDbPrivilege?access_token="+n.default.get("tokenY")},queryTbPrivilegePage:function(){return r+"/galaxy/privilege/queryTbPrivilegePage?access_token="+n.default.get("tokenY")},changeUsePrivilege:function(){return r+"/galaxy/privilege/changeUsePrivilege?access_token="+n.default.get("tokenY")},getHueAutoLoginUrl:function(){return r+"/galaxy/hadoop/getAutoLoginUrl?access_token="+n.default.get("tokenY")},getMonitorList:function(){return r+"/galaxy/work/getMonitorList?access_token="+n.default.get("tokenY")},getMonitorLog:function(t){return r+"/galaxy/work/getMonitorLog/"+t+"?access_token="+n.default.get("tokenY")},killJob:function(t){return r+"/galaxy/user/killJob/"+t+"?access_token="+n.default.get("tokenY")},getSearch:function(t){return"http://10.50.192.58:8080/search?id="+t+"&access_token="+n.default.get("tokenY")},getWarnList:function(){return r+"/galaxy/work/getWarnList?access_token="+n.default.get("tokenY")},getHostInformations:function(){return r+"/galaxy/cluster/getHostInformations?access_token="+n.default.get("tokenY")},getHostHisInformations:function(t){return r+"/galaxy/cluster/getHostHisInformations/"+t+"?access_token="+n.default.get("tokenY")}}},469:function(t,e,a){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var n=a(3),r=o(n),i=a(286),s=o(i);e.default={data:function(){var t=this;return{ajaxHistoryData:[],dataCount:0,page:{pageIndex:1,pageSize:10},SpinType:!1,removetaskId:"",modal2:!1,historyColumns:[{title:"任务号",key:"id"},{title:"用户",key:"user",minWidth:60,maxWidth:120},{title:"任务名称",key:"name"},{title:"开始时间",key:"start"},{title:"耗时(分钟)",key:"elapsed",minWidth:60,maxWidth:120},{title:"队列",key:"queue",maxWidth:200},{title:"状态",key:"statusMsg",minWidth:40,maxWidth:60},{title:"日志",key:"updateStatus",minWidth:40,maxWidth:60,render:function(e,a,o){return e("p",{props:{type:"text",size:"small"},style:{cursor:"pointer",color:"blue"},on:{click:function(e,o){t.clickToLog(a.row.id)}}},"查看")}},{title:"操作",key:"deletetStatus",minWidth:40,maxWidth:60,render:function(e,a,o){return e("p",{props:{type:"text",size:"small"},style:{color:"blue",cursor:"pointer"},on:{click:function(e,o){t.removetaskId=a.row.id,t.modal2=!0}}},"停止")}}],historyData:[],historyOldData:[],resModal:!1,resModalList:[],cityList:[{name:"全部",key:-1},{name:"良好",key:0},{name:"轻微",key:1},{name:"中度",key:2},{name:"严重",key:3},{name:"预警",key:4}],formItem:{appId:"",dur:"",state:"全部"},isNumber:!0}},computed:{newArr:function(t){var e=this;return"全部"!==this.formItem.state||this.formItem.appId||this.formItem.dur?"全部"!==this.formItem.state&&this.formItem.appId&&this.formItem.dur?this.historyData.filter(function(t){return t.statusMsg==e.formItem.state&&t.id==e.formItem.appId&&t.elapsed==e.formItem.dur}):"全部"!==this.formItem.state&&this.formItem.appId?this.historyData.filter(function(t){return t.statusMsg==e.formItem.state&&t.id==e.formItem.appId}):this.formItem.appId&&this.formItem.dur?this.historyData.filter(function(t){return t.id==e.formItem.appId&&t.elapsed==e.formItem.dur}):"全部"!==this.formItem.state&&this.formItem.dur?this.historyData.filter(function(t){return t.statusMsg==e.formItem.state&&t.elapsed==e.formItem.dur}):this.historyData.filter(function(t){return t.statusMsg==e.formItem.state||t.id==e.formItem.appId||t.elapsed==e.formItem.dur}):this.historyData}},created:function(){this.$store.state.app.homework.kill_job_task||this.historyColumns.splice(8,1),this.init()},methods:{init:function(){var t=this;this.$axios({method:"post",url:s.default.getWarnList(),data:{pageSize:this.page.pageSize,pageIndex:this.page.pageIndex},headers:{Authorization:r.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code&&(e.data.data instanceof Array?t.historyData=e.data.data:t.historyData=[],t.SpinType=!1)})},onHandChange:function(t){},changepage:function(t){this.page.pageIndex=t,this.init()},submit:function(){this.formItem.dur.match(/^\d+$/)||!this.formItem.dur?(this.SpinType=!0,this.init()):this.$Message.error("请填写整数",3)},initList:function(){this.SpinType=!0},dbNameSelectChange:function(){},modelOk:function(){this.resModal=!1,this.resModalList=[]},clickToLog:function(t){var e=this;this.$axios({method:"get",url:s.default.getMonitorLog(t),headers:{Authorization:r.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){if(200==t.data.code){var a=t.data.data.amContainerLogs;a?window.open(""+a,"_blank"):e.$Message.error("暂无数据",3)}})},removetask:function(){var t=this;this.$axios({method:"get",url:s.default.killJob(this.removetaskId),headers:{Authorization:r.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){200==e.data.code?t.$Message.success("提交成功",3):t.$Message.error("提交成功",3)})},cancel:function(){this.modal2=!1}}}},855:function(t,e,a){var o=a(856);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(9)("0bf92a27",o,!1)},856:function(t,e,a){e=t.exports=a(8)(!1),e.push([t.i,"\n.paging[data-v-272316b1] {\r\n  float: right;\r\n  margin-top: 10px;\n}\r\n",""])},857:function(t,e,a){var o=a(858);"string"==typeof o&&(o=[[t.i,o,""]]),o.locals&&(t.exports=o.locals);a(9)("783e9871",o,!1)},858:function(t,e,a){e=t.exports=a(8)(!1),e.push([t.i,"\n.aa {\n}\r\n",""])},859:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[a("div",{staticStyle:{padding:"5px 0","font-weight":"700","font-size":"18px"}},[t._v("任务预警")]),t._v(" "),a("Spin",{directives:[{name:"show",rawName:"v-show",value:t.SpinType,expression:"SpinType"}],attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),t._v(" "),a("div",[t._v("Loading")])],1),t._v(" "),a("Form",{attrs:{model:t.formItem,"label-width":60}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"任务号："}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.appId,callback:function(e){t.$set(t.formItem,"appId",e)},expression:"formItem.appId"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"耗时："}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:t.formItem.dur,callback:function(e){t.$set(t.formItem,"dur",e)},expression:"formItem.dur"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"状态："}},[a("Select",{attrs:{placeholder:"请选择"},on:{"on-change":t.dbNameSelectChange},model:{value:t.formItem.state,callback:function(e){t.$set(t.formItem,"state",e)},expression:"formItem.state"}},t._l(t.cityList,function(e){return a("Option",{key:e.key,attrs:{value:e.name}},[t._v(t._s(e.name))])}))],1)],1)],1)],1),t._v(" "),this.$store.state.app.homework.early_warn_list?a("Table",{attrs:{columns:t.historyColumns,data:t.newArr}}):t._e(),t._v(" "),a("Modal",{attrs:{title:"返回结果"},on:{"on-ok":t.modelOk,"on-cancel":t.modelOk},model:{value:t.resModal,callback:function(e){t.resModal=e},expression:"resModal"}},[a("div"),t._v(" "),t._l(t.resModalList,function(e){return a("p",[t._v("库名："+t._s(e.dbName)+","),a("br"),t._v("\n        表名："+t._s(e.tableName)+","),a("br"),t._v("\n        权限："+t._s(e.operate)+", "),a("br"),t._v("\n        权限修改结果："+t._s(1==e.secrityStatus?"成功":"失败")+" ")])})],2),t._v(" "),a("Modal",{attrs:{title:"提示"},on:{"on-ok":t.removetask,"on-cancel":t.cancel},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[a("p",[t._v("确定停止该任务？")])])],1)},n=[];o._withStripped=!0;var r={render:o,staticRenderFns:n};e.default=r}});