webpackJsonp([8],{276:function(e,n,t){"use strict";function a(e){l||(t(896),t(898))}Object.defineProperty(n,"__esModule",{value:!0});var o=t(478),r=t.n(o);for(var s in o)"default"!==s&&function(e){t.d(n,e,function(){return o[e]})}(s);var i=t(900),u=t.n(i),l=!1,c=t(0),f=a,d=c(r.a,u.a,!1,f,"data-v-60621e14",null);d.options.__file="src\\views\\form\\work-flow\\work-flow.vue",n.default=d.exports},286:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t(3),o=function(e){return e&&e.__esModule?e:{default:e}}(a),r="http://172.18.101.118:10000/galaxy-platform-management",s="http://172.18.101.118:10000";n.default={_baseUrlQ:r,userId:function(){return s+"/platform-user-oauth2/user?access_token="+o.default.get("tokenY")},Resource_permissions:function(){return s+"/platform-user-admin/resource/find/auth/"+o.default.get("party_userId")+"?access_token="+o.default.get("tokenY")},login:function(){return s+"/platform-user-oauth2/oauth/token"},com_Data:function(){return r+"/galaxy/meta/getMeta?access_token="+o.default.get("tokenY")},modifyMeta:function(){return r+"/galaxy/meta/modifyMeta?access_token="+o.default.get("tokenY")},queryUserBehaviorPage:function(){return r+"/galaxy/userBehavior/queryUserBehaviorPage?access_token="+o.default.get("tokenY")},queryAllDbs:function(){return r+"/galaxy/privilege/queryAllDbs?access_token="+o.default.get("tokenY")},queryAllUsers:function(){return s+"/platform-user-admin/user/listUserByTenant?access_token="+o.default.get("tokenY")},queryDbPrivilege:function(){return r+"/galaxy/privilege/queryDbPrivilege?access_token="+o.default.get("tokenY")},queryTbPrivilegePage:function(){return r+"/galaxy/privilege/queryTbPrivilegePage?access_token="+o.default.get("tokenY")},changeUsePrivilege:function(){return r+"/galaxy/privilege/changeUsePrivilege?access_token="+o.default.get("tokenY")},getHueAutoLoginUrl:function(){return r+"/galaxy/hadoop/getAutoLoginUrl?access_token="+o.default.get("tokenY")},getMonitorList:function(){return r+"/galaxy/work/getMonitorList?access_token="+o.default.get("tokenY")},getMonitorLog:function(e){return r+"/galaxy/work/getMonitorLog/"+e+"?access_token="+o.default.get("tokenY")},killJob:function(e){return r+"/galaxy/user/killJob/"+e+"?access_token="+o.default.get("tokenY")},getSearch:function(e){return"http://10.50.192.58:8080/search?id="+e+"&access_token="+o.default.get("tokenY")},getWarnList:function(){return r+"/galaxy/work/getWarnList?access_token="+o.default.get("tokenY")},getHostInformations:function(){return r+"/galaxy/cluster/getHostInformations?access_token="+o.default.get("tokenY")},getHostHisInformations:function(e){return r+"/galaxy/cluster/getHostHisInformations/"+e+"?access_token="+o.default.get("tokenY")}}},478:function(e,n,t){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(n,"__esModule",{value:!0});var o=t(286),r=a(o),s=t(3),i=a(s),u=t(14),l=a(u);n.default={data:function(){return{ajaxHistoryData:[],dataCount:0,page:{pageIndex:1,pageSize:10},SpinType:!1,resModal:!1,resModalList:[],cityList:[{}],userList:[],formItem:{input:"",checkbox:[],dbName:"",userName:""},queryDbPrivilegeList:[{name:"查询",key:"selectStatus",flag:0},{name:"添加",key:"insertStatus",flag:0},{name:"修改",key:"updateStatus",flag:0},{name:"删除",key:"deletetStatus",flag:0}],queryDbPrivilegeOldList:{}}},created:function(){this.init()},methods:{init:function(){var e=this;this.$axios({method:"post",url:r.default.queryAllUsers(),data:{pageInfo:{currentPage:0,pageSize:0,totalPages:0,totalRecords:0},tenantId:1},headers:{Authorization:i.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){if(200==n.data.code&&n.data.data){var t=[];n.data.data.forEach(function(e){t.push(e.email.split("@")[0])}),e.userList=t,e.userList.push("gtb1"),t.length>0&&(e.formItem.userName=t[0])}}),this.$axios({method:"get",url:r.default.queryAllDbs(),headers:{Authorization:i.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){200==n.data.code?(e.cityList=n.data.data,e.formItem.dbName=n.data.data[0].dbName):e.$Message.info(n.data.msg)})},submit:function(){var e=this;this.SpinType=!0;var n=this.formItem.userName,t=[],a=l.default.uniq(this.formItem.input.replace(/\s+/g,"").split(","));this.formItem.checkbox.map(function(o,r){a.map(function(a){t.push({dbName:e.formItem.dbName,flag:"1",operate:e.conversion(o),tableName:a,userName:n})})}),this.$axios({method:"post",url:r.default.changeUsePrivilege(),data:t,headers:{Authorization:i.default.get("tokenY"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(n){200==n.data.code?(e.resModalList=n.data.data,e.resModal=!0,e.SpinType=!1):(e.SpinType=!1,e.$Message.info(n.data.msg))},function(n){e.SpinType=!1,e.$Message.info("网络请求错误")}),setTimeout(function(){e.SpinType&&e.$Message.info("稍等")},5e3)},modelOk:function(){this.resModal=!1,this.resModalList=[]},conversion:function(e){switch(e){case"deletetStatus":return"delete";case"insertStatus":return"insert";case"selectStatus":return"select";case"updateStatus":return"update"}}}}},896:function(e,n,t){var a=t(897);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(9)("7b5efdca",a,!1)},897:function(e,n,t){n=e.exports=t(8)(!1),n.push([e.i,"\n.paging[data-v-60621e14] {\r\n  float: right;\r\n  margin-top: 10px;\n}\r\n",""])},898:function(e,n,t){var a=t(899);"string"==typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);t(9)("439f9d5f",a,!1)},899:function(e,n,t){n=e.exports=t(8)(!1),n.push([e.i,"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",""])},900:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[t("Spin",{directives:[{name:"show",rawName:"v-show",value:e.SpinType,expression:"SpinType"}],attrs:{fix:""}},[t("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),e._v(" "),t("div",[e._v("Loading")])],1),e._v(" "),t("Form",{attrs:{model:e.formItem,"label-width":60}},[t("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[t("Col",{attrs:{span:"5"}},[t("Form-item",{attrs:{label:"用户名："}},[t("Select",{attrs:{placeholder:"请选择"},model:{value:e.formItem.userName,callback:function(n){e.$set(e.formItem,"userName",n)},expression:"formItem.userName"}},e._l(e.userList,function(n){return t("Option",{key:n,attrs:{value:n||""}},[e._v(e._s(n))])}))],1)],1),e._v(" "),t("Col",{attrs:{span:"5"}},[t("Form-item",{attrs:{label:"库名："}},[t("Select",{attrs:{placeholder:"请选择"},model:{value:e.formItem.dbName,callback:function(n){e.$set(e.formItem,"dbName",n)},expression:"formItem.dbName"}},e._l(e.cityList,function(n){return t("Option",{key:n.dbName,attrs:{value:n.dbName||""}},[e._v(e._s(n.dbName)+"\n                    ")])}))],1)],1),e._v(" "),t("Col",{attrs:{span:"8"}},[t("Form-item",{attrs:{label:""}},[t("Checkbox-group",{model:{value:e.formItem.checkbox,callback:function(n){e.$set(e.formItem,"checkbox",n)},expression:"formItem.checkbox"}},e._l(e.queryDbPrivilegeList,function(n){return t("Checkbox",{attrs:{label:n.key}},[e._v(e._s(n.name))])}))],1)],1),e._v(" "),t("Col",{attrs:{span:"4"}},[t("Button",{attrs:{type:"primary",disabled:!(e.formItem.input&&e.formItem.checkbox.length)},on:{click:e.submit}},[e._v("提交")])],1)],1)],1),e._v(" "),t("Row",[t("Col",{attrs:{span:"18"}},[t("Form",{attrs:{"label-width":60}},[t("Form-item",{attrs:{label:"表名："}},[t("Input",{attrs:{placeholder:"输入表明以逗号分隔..."},model:{value:e.formItem.input,callback:function(n){e.$set(e.formItem,"input",n)},expression:"formItem.input"}})],1)],1)],1)],1),e._v(" "),t("Modal",{attrs:{title:"返回结果"},on:{"on-ok":e.modelOk,"on-cancel":e.modelOk},model:{value:e.resModal,callback:function(n){e.resModal=n},expression:"resModal"}},[t("div",{staticStyle:{"max-height":"400px","overflow-y":"scroll"}},e._l(e.resModalList,function(n){return t("p",[e._v("库名："+e._s(n.dbName)+","),t("br"),e._v("\n                    表名："+e._s(n.tableName)+","),t("br"),e._v("\n                    权限："+e._s(n.operate)+","),t("br"),e._v("\n                    权限修改结果："+e._s(1==n.secrityStatus?"成功":"失败")+" ")])}))])],1)},o=[];a._withStripped=!0;var r={render:a,staticRenderFns:o};n.default=r}});