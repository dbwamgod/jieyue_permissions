webpackJsonp([3],{268:function(e,t,a){"use strict";function n(e){l||(a(860),a(862))}Object.defineProperty(t,"__esModule",{value:!0});var o=a(470),r=a.n(o);for(var i in o)"default"!==i&&function(e){a.d(t,e,function(){return o[e]})}(i);var s=a(868),u=a.n(s),l=!1,c=a(0),d=n,p=c(r.a,u.a,!1,d,"data-v-98f2a91a",null);p.options.__file="src\\views\\my-components\\image-editor\\image-editor.vue",t.default=p.exports},286:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(3),o=function(e){return e&&e.__esModule?e:{default:e}}(n),r="http://172.18.101.118:10000/galaxy-platform-management",i="http://172.18.101.118:10000";t.default={_baseUrlQ:r,userId:function(){return i+"/platform-user-oauth2/user?access_token="+o.default.get("tokenY")},Resource_permissions:function(){return i+"/platform-user-admin/resource/find/auth/"+o.default.get("party_userId")+"?access_token="+o.default.get("tokenY")},login:function(){return i+"/platform-user-oauth2/oauth/token"},com_Data:function(){return r+"/galaxy/meta/getMeta?access_token="+o.default.get("tokenY")},modifyMeta:function(){return r+"/galaxy/meta/modifyMeta?access_token="+o.default.get("tokenY")},queryUserBehaviorPage:function(){return r+"/galaxy/userBehavior/queryUserBehaviorPage?access_token="+o.default.get("tokenY")},queryAllDbs:function(){return r+"/galaxy/privilege/queryAllDbs?access_token="+o.default.get("tokenY")},queryAllUsers:function(){return i+"/platform-user-admin/user/listUserByTenant?access_token="+o.default.get("tokenY")},queryDbPrivilege:function(){return r+"/galaxy/privilege/queryDbPrivilege?access_token="+o.default.get("tokenY")},queryTbPrivilegePage:function(){return r+"/galaxy/privilege/queryTbPrivilegePage?access_token="+o.default.get("tokenY")},changeUsePrivilege:function(){return r+"/galaxy/privilege/changeUsePrivilege?access_token="+o.default.get("tokenY")},getHueAutoLoginUrl:function(){return r+"/galaxy/hadoop/getAutoLoginUrl?access_token="+o.default.get("tokenY")},getMonitorList:function(){return r+"/galaxy/work/getMonitorList?access_token="+o.default.get("tokenY")},getMonitorLog:function(e){return r+"/galaxy/work/getMonitorLog/"+e+"?access_token="+o.default.get("tokenY")},killJob:function(e){return r+"/galaxy/user/killJob/"+e+"?access_token="+o.default.get("tokenY")},getSearch:function(e){return"http://10.50.192.58:8080/search?id="+e+"&access_token="+o.default.get("tokenY")},getWarnList:function(){return r+"/galaxy/work/getWarnList?access_token="+o.default.get("tokenY")},getHostInformations:function(){return r+"/galaxy/cluster/getHostInformations?access_token="+o.default.get("tokenY")},getHostHisInformations:function(e){return r+"/galaxy/cluster/getHostHisInformations/"+e+"?access_token="+o.default.get("tokenY")}}},470:function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(864),r=n(o),i=a(3),s=n(i),u=a(14),l=n(u),c=a(286),d=n(c);t.default={data:function(){var e=this;return{ajaxHistoryData:[],dataCount:0,page:{pageIndex:1,pageSize:10},SpinType:!1,historyColumns:[{title:"任务号",key:"appId"},{title:"用户",key:"user",minWidth:60,maxWidth:80},{title:"任务名称",key:"name"},{title:"开始时间",key:"startTime",render:function(e,t){return l.default.getStringTime(new Date(t.row.startTime))}},{title:"结束时间",key:"finishTime",render:function(e,t){return l.default.getStringTime(new Date(t.row.finishTime))}},{title:"耗时(分钟)",key:"durTime",minWidth:60,maxWidth:100,render:function(e,t){return Number((t.row.durTime/6e4).toFixed(1))}},{title:"队列",key:"queue",maxWidth:200},{title:"状态",key:"state",minWidth:60,maxWidth:80},{title:"日志",key:"updateStatus",minWidth:40,maxWidth:60,render:function(t,a,n){return t("p",{props:{type:"text",size:"small"},style:{cursor:"pointer",color:"blue"},on:{click:function(t,n){e.clickToLog(a.row.appId)}}},"查看")}},{title:"优化",key:"deletetStatus",minWidth:40,maxWidth:60,render:function(e,t,a){return e("p",{props:{type:"text",size:"small"},style:{cursor:"pointer",color:"blue"},on:{click:function(e,a){window.open(d.default.getSearch(t.row.appId),"_blank")}}},"查看")}}],historyData:[{tableName:1}],historyOldData:[],resModal:!1,resModalList:[],cityList:[{name:"ALL",key:0},{name:"FINISHED",key:1},{name:"KILLED",key:2},{name:"FAILED",key:3}],formItem:{appId:"",dur:"",state:0},isNumber:!0,appId:"",dur:"",state:0,paramInfo:{}}},created:function(){this.$store.state.app.homework.log_info&&this.historyColumns.splice(8,1),this.init()},methods:{init:function(){var e=this;console.log("init",this.screenKey("finishTime")),this.$axios({method:"post",url:d.default.getMonitorList(),data:{appId:this.appId,status:this.formItem.state,dur:this.dur||"",pageSize:this.page.pageSize,pageIndex:this.page.pageIndex,searchAfterVo:{pageIndex:this.screenKey("finishTime")[1],finishTime:this.screenKey("finishTime")[0],appId:this.screenKey("appId")[0]}},headers:{Authorization:s.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(t){200==t.data.code?(e.historyData=t.data.data,e.dataCount=t.data.page.totalRecords,e.SpinType=!1,e.paramInfo[e.page.pageIndex]=t.data.data[e.historyData.length-1]):e.$Message.error(t.data.msg,3)},function(t){e.$Message.error("网络错误",3)})},onHandChange:function(e){},screenKey:function(e){var t=this,a=(0,r.default)(this.paramInfo).filter(function(e){return e<t.page.pageIndex}),n=a[a.length-1];return this.paramInfo[n]?[this.paramInfo[n][e],n]:[]},changepage:function(e){console.log(e),this.page.pageIndex=e,this.init()},submit:function(){this.formItem.dur.match(/^\d+$/)||!this.formItem.dur?(this.appId=this.formItem.appId,this.status=this.formItem.state,this.dur=this.formItem.dur||"",this.SpinType=!0,this.page.pageIndex=1,this.init()):this.$Message.error("请填写整数",3)},initList:function(){this.SpinType=!0},dbNameSelectChange:function(){},modelOk:function(){this.resModal=!1,this.resModalList=[]},clickToLog:function(e){var t=this;this.$axios({method:"get",url:d.default.getMonitorLog(e),headers:{Authorization:s.default.get("token"),"Content-Type":"application/json;charset=UTF-8"}}).then(function(e){if(200==e.data.code){var a=e.data.data.amContainerLogs;a?window.open(""+a,"_blank"):t.$Message.error("暂无数据",3)}})}}}},860:function(e,t,a){var n=a(861);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(9)("53975eaa",n,!1)},861:function(e,t,a){t=e.exports=a(8)(!1),t.push([e.i,"\n.paging[data-v-98f2a91a] {\r\n  float: right;\r\n  margin-top: 10px;\n}\r\n",""])},862:function(e,t,a){var n=a(863);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(9)("11f11432",n,!1)},863:function(e,t,a){t=e.exports=a(8)(!1),t.push([e.i,"\n.aa{\n}\r\n",""])},864:function(e,t,a){e.exports={default:a(865),__esModule:!0}},865:function(e,t,a){a(866),e.exports=a(6).Object.keys},866:function(e,t,a){var n=a(35),o=a(24);a(867)("keys",function(){return function(e){return o(n(e))}})},867:function(e,t,a){var n=a(22),o=a(6),r=a(19);e.exports=function(e,t){var a=(o.Object||{})[e]||Object[e],i={};i[e]=t(a),n(n.S+n.F*r(function(){a(1)}),"Object",i)}},868:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{position:"relative",height:"100%",padding:"10px"}},[a("div",{staticStyle:{padding:"5px 0","font-weight":"700","font-size":"18px"}},[e._v("任务查询")]),e._v(" "),a("Spin",{directives:[{name:"show",rawName:"v-show",value:e.SpinType,expression:"SpinType"}],attrs:{fix:""}},[a("Icon",{staticClass:"demo-spin-icon-load",attrs:{type:"load-c",size:"18"}}),e._v(" "),a("div",[e._v("Loading")])],1),e._v(" "),a("Form",{attrs:{model:e.formItem,"label-width":60}},[a("Row",{staticClass:"code-row-bg",attrs:{type:"flex",justify:"start"}},[a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"任务号："}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formItem.appId,callback:function(t){e.$set(e.formItem,"appId",t)},expression:"formItem.appId"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"耗时："}},[a("Input",{attrs:{placeholder:"请输入"},model:{value:e.formItem.dur,callback:function(t){e.$set(e.formItem,"dur",t)},expression:"formItem.dur"}})],1)],1),e._v(" "),a("Col",{attrs:{span:"5"}},[a("Form-item",{attrs:{label:"状态："}},[a("Select",{attrs:{placeholder:"请选择"},on:{"on-change":e.dbNameSelectChange},model:{value:e.formItem.state,callback:function(t){e.$set(e.formItem,"state",t)},expression:"formItem.state"}},e._l(e.cityList,function(t){return a("Option",{key:t.key,attrs:{value:t.key}},[e._v(e._s(t.name))])}))],1)],1),e._v(" "),a("Col",{staticStyle:{"text-align":"center"},attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)],1)],1),e._v(" "),this.$store.state.app.homework.check_list?a("Table",{attrs:{columns:e.historyColumns,data:e.historyData}}):e._e(),e._v(" "),this.$store.state.app.homework.check_list?a("Page",{staticClass:"paging",attrs:{total:e.dataCount,"page-size":e.page.pageSize,current:e.page.pageIndex,"show-elevator":""},on:{"on-change":e.changepage}}):e._e(),e._v(" "),a("Modal",{attrs:{title:"返回结果"},on:{"on-ok":e.modelOk,"on-cancel":e.modelOk},model:{value:e.resModal,callback:function(t){e.resModal=t},expression:"resModal"}},e._l(e.resModalList,function(t){return a("p",[e._v("库名："+e._s(t.dbName)+","),a("br"),e._v("\n        表名："+e._s(t.tableName)+","),a("br"),e._v("\n        权限："+e._s(t.operate)+", "),a("br"),e._v("\n        权限修改结果："+e._s(1==t.secrityStatus?"成功":"失败")+" ")])}))],1)},o=[];n._withStripped=!0;var r={render:n,staticRenderFns:o};t.default=r}});